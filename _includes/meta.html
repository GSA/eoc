{% comment %}
You shouldn't have to edit this page very often. But if you want to modify some of the meta-data for the
site, this is the place to do it.
{% endcomment %}

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="robots" content="index,follow">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  {% assign shortened_title = page.title | default: site.title | escape %}
  {% if shortened_title.size > 60 %}
    {% assign shortened_title = shortened_title | truncatewords: 10, '...' %}
  {% endif %}

  {% assign shortened_description = page.excerpt | default: site.description | escape %}
  {% if shortened_description.size > 155 %}
    {% assign shortened_description = shortened_description | truncatewords: 25, '...' %}
  {% endif %}

  <title>{{ shortened_title }}</title>
  <meta property="og:title" content="{{ shortened_title }}">
  <meta name="description" content="{{ shortened_description }}">
  <meta property="og:description" content="{{ shortened_description }}">

  {% assign imgPathSocials = "../assets/images/eoc-social-thumbnail.png" %}

  {% if page.url == "/" or page.url == site.baseurl or page.permalink == "/" %}
    {% assign imgPathSocials = "../assets/images/eoc-social-thumbnail.png" %}
  {% elsif page.thumbnail %}
    {% assign imgPathSocials = "../assets/images/{{ page.thumbnail }}" %}
    {% if imgPathSocials == "../assets/images/savanna_elephants.jpg" and page.permalink != "/USFWS-International-Conservation/" %}
      {% assign imgPathSocials = "../assets/images/eoc-social-thumbnail.png" %}
    {% endif %}
  {% endif %}

  <meta property="og:image" content="{{ imgPathSocials }}">
  <meta name="twitter:image" content="{{ imgPathSocials }}">
  <meta property="og:image:alt" content="{{ page.thumbnail-alt | default: 'Evaluation.gov' | escape }}">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@{{ site.twitter }}">
  <meta name="twitter:title" content="{{ shortened_title }}">
  <meta name="twitter:description" content="{{ shortened_description }}">
  <meta name="twitter:image:alt" content="{{ page.thumbnail-alt | default: 'Evaluation.gov' | escape }}">
  <meta name="twitter:creator" content="@{{ site.twitter_creator }}">
  <meta property="og:type" content="article">
  <link rel="canonical" href="{{ page.permalink | absolute_url | escape }}">
  <meta property="og:url" content="{{ page.permalink | absolute_url | escape }}">

  <link rel="shortcut icon" type="image/png" href="{{ site.baseurl }}/assets/images/favicon.png">
  <link rel="icon" type="image/png" href="{{ site.baseurl }}/assets/images/favicon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="{{ site.baseurl }}/assets/images/favicon.png">
  <link rel="apple-touch-icon-precomposed" href="{{ site.baseurl }}/assets/images/favicon.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{{ site.baseurl }}/assets/images/favicon.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{{ site.baseurl }}/assets/images/favicon.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ site.baseurl }}/assets/images/favicon.png">

  <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/slick.css?{{ site.time | date: '%s%N' }}">
  <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/slick-theme.css?{{ site.time | date: '%s%N' }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/index.css?{{ site.time | date: '%s%N' }}">
  <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/main.css?{{ site.time | date: '%s%N' }}">
  <script src="{{ site.baseurl }}/assets/js/uswds-init.min.js?{{ site.time | date: '%s%N' }}"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      function shorten(s, max){
          s = s.split(' ');
          cut = '';
          while (cut.length<=max && s.length){
              cut += s.shift() + ' ';
          }
          if (s.length) cut = cut.substring(0,cut.length-1) + '...'
          return cut
      }
      const metaTitle = document.querySelector('meta[property="og:title"]');
      const twitterTitle = document.querySelector('meta[name="twitter:title"]');
      if (metaTitle) {
        var metaTitleContent = metaTitle.getAttribute('content');
        metaTitleContent = shorten(metaTitleContent,60);
        metaTitle.setAttribute('content', metaTitleContent);
      }
      if (twitterTitle) {
        var twitterTitleContent = twitterTitle.getAttribute('content');
        twitterTitleContent = shorten(twitterTitleContent,60);
        twitterTitle.setAttribute('content', twitterTitleContent);
      }
      
    });
  </script>
</head>
